# Webpack Bundle Visualizer

A simple web-based tool to visualize the contents and sizes of assets listed in a webpack stats JSON file, specifically designed to work with the format generated by [django-webpack/webpack-bundle-tracker](https://github.com/django-webpack/webpack-bundle-tracker).

This tool provides a user interface to inspect asset sizes, filter them based on size and name patterns, and view the raw data.

## Features

*   **Web Interface:** Serves an HTML page using Bun, Tailwind CSS, and HTMX for interactive analysis.
*   **Asset Listing:** Displays assets from the stats file, showing their names and calculated sizes.
*   **Size Visualization:** Includes a simple bar visualization comparing asset sizes relative to the largest asset in the current view.
*   **Filtering:**
    *   Hide assets smaller than a specified size (in KB).
    *   Exclude assets matching specific string patterns or regular expressions (e.g., `node_modules/`, `/\.map$/`).
*   **Raw Data View:** Option to display the filtered asset data in JSON format.
*   **Real File Sizes:** Attempts to read the actual size of asset files from the disk based on the paths provided in the stats file. Warns if files are not found.

## Prerequisites

*   [Bun](https://bun.sh/) runtime environment.

## Installation

1.  Clone the repository (if applicable).
2.  Install dependencies:
    ```bash
    bun install
    ```

## Usage

1.  **Generate Stats File:** Ensure you have a `webpack-stats.json` (or similarly named) file generated by `webpack-bundle-tracker`.
2.  **Run the Server:** Use the `serve` command via `bun start`, providing the path to your stats file. You can optionally specify a port using the `--port` or `-p` flag (defaults to 3000).

    ```bash
    bun start serve <path_to_your_webpack-stats.json> [--port <number>]
    ```

    *   **`<path_to_your_webpack-stats.json>`:** Replace this with the actual path to your stats file. The server will look for asset files relative to the directory containing this stats file.
    *   **`--port <number>` or `-p <number>`:** (Optional) Specify a port number if you don't want to use the default `3000`.

    **Examples:**
    ```bash
    # Serve using the default port (3000)
    bun start serve ./test/webpack-stats.json

    # Serve on port 8080
    bun start serve ./test/webpack-stats.json --port 8080
    ```
    You can also see help information:
    ```bash
    bun start --help
    bun start serve --help
    ```

3.  **View Analysis:** Open your web browser and navigate to `http://localhost:<port>` (e.g., `http://localhost:3000` or `http://localhost:8080` based on the port used).

## Interface Guide

*   **Stats File Path:** Displays the path of the stats file being analyzed.
*   **Filter Controls:**
    *   **Hide assets < X KB:** Enter a minimum size in kilobytes. Assets smaller than this will be hidden from the table.
    *   **Exclude patterns:** Enter comma-separated strings or `/regex/` patterns. Assets whose names match any pattern will be excluded. Examples: `node_modules/`, `.map$`, `/vendor\..*\.js$/`.
*   **Show Raw Data:** Click this button to view the currently filtered list of assets as raw JSON data.
*   **Asset Table:**
    *   **Asset Name:** The name of the asset as listed in the stats file.
    *   **Size:** The calculated size of the asset file on disk (formatted). Shows 'N/A' if the size couldn't be determined or the file wasn't found.
    *   **Visualization:** A horizontal bar indicating the asset's size relative to the largest asset currently displayed in the table.

Filter changes are applied automatically after a short delay. Filter settings are saved in your browser's `localStorage`.
